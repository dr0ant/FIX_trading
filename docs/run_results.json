{"metadata": {"dbt_schema_version": "https://schemas.getdbt.com/dbt/run-results/v6.json", "dbt_version": "1.10.2", "generated_at": "2025-07-03T20:41:55.423098Z", "invocation_id": "295d0eab-038e-4579-81d7-235716ad5631", "invocation_started_at": "2025-07-03T20:41:55.048659Z", "env": {}}, "results": [{"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.405026Z", "completed_at": "2025-07-03T20:41:55.409263Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.409439Z", "completed_at": "2025-07-03T20:41:55.409447Z"}], "thread_id": "Thread-1", "execution_time": 0.004845142364501953, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.landing_fix", "compiled": true, "compiled_code": "\n\nSELECT\n  filename,  -- Optional: only if added manually during parsing\n  \"52\" AS timestamp,\n  \"49\" AS system,\n  \"35\" AS msg_type,\n  \"11\" AS cl_ord_id,\n  \"37\" AS order_id,\n  \"17\" AS exec_id,\n  \"150\" AS exec_type,\n  \"39\" AS ord_status,\n  \"1\"   AS account,\n  \"55\"  AS symbol,\n  \"54\"  AS side,\n  \"15\"  AS currency,\n  \"44\"  AS price,\n  \"38\"  AS quantity,\n  \"60\"  AS transact_time,\n  \"49\"  AS sender_comp_id,\n  \"56\"  AS target_comp_id,\n  \"59\"  AS time_in_force,\n  \"10\"  AS checksum,\n  \"9\"   AS body_length,\n  \"8\"   AS begin_string,\n  \"34\"  AS msg_seq_num,\n  \"52\"  AS sending_time,\n  \"526\" AS secondary_cl_ord_id\nFROM read_parquet('s3://parquetfixlogs/*.parquet')\nORDER BY \"52\"", "relation_name": "\"duckdb_pictet\".\"main_00_landing_fix\".\"fix_trading_raw\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.410538Z", "completed_at": "2025-07-03T20:41:55.412014Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.412171Z", "completed_at": "2025-07-03T20:41:55.412175Z"}], "thread_id": "Thread-3", "execution_time": 0.0020842552185058594, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.stg_fix_trading", "compiled": true, "compiled_code": "-- DBT LAYER: staging/landing_fix__stg_fix_trading.sql\n-- This prepares the raw FIX logs for transformation\n\n\n\n\nWITH base AS (\n  SELECT\n  \tSTRPTIME(timestamp, '%Y%m%d-%H:%M:%S.%f')::timestamp AS msg_timestamp,\n  \tSTRPTIME('2023-03-09-09:30:05.063', '%Y-%m-%d-%H:%M:%S.%f')::timestamp as transact_time,\n  \tSTRPTIME(sending_time, '%Y%m%d-%H:%M:%S.%f')::timestamp AS sending_time,\n    msg_type,\n    cl_ord_id,\n    secondary_cl_ord_id,\n    order_id,\n    exec_id,\n    exec_type,\n    ord_status,\n    account,\n    symbol,\n    side,\n    currency,\n    try_cast(price AS double) AS price,\n    try_cast(quantity AS double) AS qty,\n    sender_comp_id,\n    target_comp_id,\n    time_in_force,\n    try_cast(checksum AS int) AS checksum,\n    try_cast(body_length AS int) AS body_length,\n    try_cast(msg_seq_num AS int) AS msg_seq_num,\n    begin_string,\n    filename,\n    system\n  FROM \"duckdb_pictet\".\"main_00_landing_fix\".\"fix_trading_raw\"\n)\n\nSELECT * FROM base", "relation_name": "\"duckdb_pictet\".\"main_01_staging_fix\".\"stg_fix_trading\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.413141Z", "completed_at": "2025-07-03T20:41:55.414571Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.414752Z", "completed_at": "2025-07-03T20:41:55.414756Z"}], "thread_id": "Thread-2", "execution_time": 0.002084016799926758, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.refine_fix_trading", "compiled": true, "compiled_code": "-- intermediate/fix__int_order_metrics.sql\n\n\nWITH enriched AS (\n  SELECT\n    *,\n    msg_timestamp - transact_time AS latency_interval,\n    ROW_NUMBER() OVER (PARTITION BY cl_ord_id ORDER BY msg_timestamp) = 1 AS is_first_msg\n  FROM \"duckdb_pictet\".\"main_01_staging_fix\".\"stg_fix_trading\"\n)\n\nSELECT * FROM enriched", "relation_name": "\"duckdb_pictet\".\"main_02_intermediate_fix\".\"refine_fix_trading\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.418125Z", "completed_at": "2025-07-03T20:41:55.420832Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.421331Z", "completed_at": "2025-07-03T20:41:55.421335Z"}], "thread_id": "Thread-3", "execution_time": 0.005466938018798828, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.agg_kpi_m1_sym", "compiled": true, "compiled_code": "\n\nSELECT\n  DATE_TRUNC('minute', msg_timestamp) AS trading_minute,\n  symbol,\n  COUNT(DISTINCT cl_ord_id) AS total_orders,\n  COUNT(CASE WHEN exec_type = 'F' THEN 1 END) AS execution_count,\n  COUNT(CASE WHEN ord_status = '8' THEN 1 END) * 1.0 / COUNT(*) AS reject_rate,\n  AVG(latency_interval) AS avg_latency,\n  COUNT(CASE WHEN checksum IS NULL OR checksum <= 0 THEN 1 END) AS invalid_checksums,\n  AVG(body_length) AS avg_body_length\nFROM \"duckdb_pictet\".\"main_02_intermediate_fix\".\"refine_fix_trading\"\nGROUP BY 1, 2\nORDER BY 1, 2", "relation_name": "\"duckdb_pictet\".\"main_03_KPI_fix\".\"agg_kpi_m1_sym\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.419427Z", "completed_at": "2025-07-03T20:41:55.421000Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.421616Z", "completed_at": "2025-07-03T20:41:55.421620Z"}], "thread_id": "Thread-1", "execution_time": 0.00556492805480957, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.agg_kpi_system_level", "compiled": true, "compiled_code": "\n\n\nselect\n    sender_comp_id,\n    target_comp_id,\n    count(*) as nb_messages,\n    count(case when msg_type = 'D' then 1 end) as nb_orders,\n    count(case when msg_type = '8' then 1 end) as nb_exec_reports,\n    sum(try_cast(qty as double)) as volume_total,\n    avg(latency_interval) as avg_latency_ms\nfrom \"duckdb_pictet\".\"main_02_intermediate_fix\".\"refine_fix_trading\"\ngroup by sender_comp_id, target_comp_id", "relation_name": "\"duckdb_pictet\".\"main_03_KPI_fix\".\"agg_kpi_system_level\"", "batch_results": null}, {"status": "success", "timing": [{"name": "compile", "started_at": "2025-07-03T20:41:55.416762Z", "completed_at": "2025-07-03T20:41:55.421170Z"}, {"name": "execute", "started_at": "2025-07-03T20:41:55.421885Z", "completed_at": "2025-07-03T20:41:55.421888Z"}], "thread_id": "Thread-4", "execution_time": 0.006258964538574219, "adapter_response": {}, "message": null, "failures": null, "unique_id": "model.pictet_fix_project.agg_kpi_m1", "compiled": true, "compiled_code": "\n\nSELECT\n  DATE_TRUNC('minute', msg_timestamp) AS trading_minute,\n  COUNT(DISTINCT cl_ord_id) AS total_orders,\n  COUNT(CASE WHEN exec_type = 'F' THEN 1 END) AS execution_count,\n  COUNT(CASE WHEN ord_status = '8' THEN 1 END) * 1.0 / COUNT(*) AS reject_rate,\n  AVG(latency_interval) AS avg_latency,\n  COUNT(CASE WHEN checksum IS NULL OR checksum <= 0 THEN 1 END) AS invalid_checksums,\n  AVG(body_length) AS avg_body_length\nFROM \"duckdb_pictet\".\"main_02_intermediate_fix\".\"refine_fix_trading\"\nGROUP BY 1\nORDER BY 1", "relation_name": "\"duckdb_pictet\".\"main_03_KPI_fix\".\"agg_kpi_m1\"", "batch_results": null}], "elapsed_time": 0.10064935684204102, "args": {"require_all_warnings_handled_by_warn_error": false, "which": "generate", "log_file_max_bytes": 10485760, "validate_macro_args": false, "introspect": true, "log_path": "/Users/larcher/FIX_trading/dagster/deployments/fix_pipeline/pictet_fix_project/logs", "use_fast_test_edges": false, "compile": true, "warn_error_options": {"error": [], "warn": [], "silence": []}, "version_check": true, "populate_cache": true, "static": false, "log_format_file": "debug", "partial_parse": true, "send_anonymous_usage_stats": true, "log_format": "default", "print": true, "require_explicit_package_overrides_for_builtin_materializations": true, "favor_state": false, "printer_width": 80, "cache_selected_only": false, "skip_nodes_if_on_run_start_fails": false, "defer": false, "exclude": [], "require_resource_names_without_spaces": true, "show_resource_report": false, "use_colors_file": true, "macro_debugging": false, "log_level": "info", "profiles_dir": ".dbt", "quiet": false, "use_colors": true, "upload_to_artifacts_ingest_api": false, "log_level_file": "debug", "project_dir": "/Users/larcher/FIX_trading/dagster/deployments/fix_pipeline/pictet_fix_project", "show_all_deprecations": false, "invocation_command": "dbt docs generate --profiles-dir .dbt --target dev", "require_nested_cumulative_type_params": false, "state_modified_compare_more_unrendered_values": false, "select": [], "indirect_selection": "eager", "target": "dev", "empty_catalog": false, "write_json": true, "state_modified_compare_vars": false, "static_parser": true, "strict_mode": false, "source_freshness_run_project_hooks": true, "require_yaml_configuration_for_mf_time_spines": false, "partial_parse_file_diff": true, "vars": {}, "require_batched_execution_for_custom_microbatch_strategy": false}}